<div class="mt-2 p-2 bg-success text-white rounded">
  <h2>Post API, Update & Delete</h2>
</div>

<br>

<div *ngIf="isLoading" class="alert alert-info">
  Loading products, please wait...
</div>

<div *ngIf="errorMessage" class="alert alert-danger">
  {{ errorMessage }}
</div>

<div class="row">
  <!-- Product List Section -->
  <div class="col-8">
    <div *ngIf="!isLoading && !errorMessage" class="col-12 mt-2 p-2 bg-secondary text-white rounded">
      <h3>Product List</h3>
    </div>
    <div class="pt-3">
      <table *ngIf="!isLoading && !errorMessage" class="table table-bordered">
        <thead>
          <tr>
            <th>Sr No</th>
            <th>Name</th>
            <th>Description</th>
            <th>SkuCode</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Update</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          @for (item of productList; track $index) {
            <tr>
              <td>{{$index + 1}}</td>
              <td>{{item.name}}</td>
              <td>{{item.description}}</td>
              <td>{{item.skuCode}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.price}}</td>
              <td>
                <app-my-button [btnClass]="'btn btn-primary'" [btnText]="'Edit'" (onBtnClick)="onEdit(item)"/>
              </td>
              <td>
                <app-my-button [btnClass]="'btn btn-danger'" [btnText]="'Delete'" (onBtnClick)="onDelete(item.id)"/>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Create/Update Product Section -->
  <div class="col-4">
    <div class="col-12 mt-2 p-2 bg-secondary text-white rounded">
      <h3>Create Product</h3>
    </div>
    <div class="pt-3">
      <form class="row g-3" #form="ngForm">
        <div class="col-md-12">
          <label class="form-label">Product Name</label>
          <input type="text" name="name" [(ngModel)]="this.productService.productObj.name" class="form-control" required />
        </div>

        <div class="col-md-12">
          <label class="form-label">Product Code</label>
          <input type="text" name="skuCode" [(ngModel)]="this.productService.productObj.skuCode" class="form-control" required />
        </div>

        <div class="col-md-12">
          <label class="form-label">Quantity</label>
          <input type="number" name="quantity" [(ngModel)]="this.productService.productObj.quantity" class="form-control" required />
        </div>

        <div class="col-md-12">
          <label class="form-label">Price</label>
          <input type="number" name="price" [(ngModel)]="this.productService.productObj.price" class="form-control" required />
        </div>

        <div class="col-md-12">
          <label class="form-label">Description</label>
          <input type="text" name="description" [(ngModel)]="this.productService.productObj.description" class="form-control" required />
        </div>

        <div class="col-12">
          <app-my-button [btnClass]="'btn btn-secondary'" [btnText]="'Reset Form'" (onBtnClick)="resetFrom()"/>
          @if (this.productService.productObj.id == 0) {
            <button class="btn btn-primary mx-2" type="button" [disabled]="form.invalid" (click)="onSave()">
              Save
            </button>
          }@else {
            <button class="btn btn-primary mx-2" type="button" [disabled]="form.invalid" (click)="onUpdate()">
              Update
            </button>
          }
        </div>
      </form>
    </div>
  </div>
</div>
